from fivem.errors import BadIPFormat

class ServerIP:
  
    def __init__(self):
        self.error = BadIPFormat('[ERROR] Incorrect IP format.')
        self.default_port = 30120
  
    def convert(self, argument):
        if argument.startswith(('fivem', 'www')):
            try:
                ip, port = socket.gethostbyname(argument), self.default_port
                srvip = '{0}:{1}'.format(ip, port)
                return srvip
            except:
                raise self.error
        try:
            ip, port = self.argument.split(':')
        excpet ValueError:
            port = self.default_port
        try:
            ip_list = ip.split('.'):
        excpet ValueError:
            raise self.error
        else:
            if len(ip_list) == 4 and len(port) in (4, 5):
                srvip = '{0}:{1}'.format(ip, port)
                return srvip
            else:
                raise self.error
